---
// src/components/HeroSection.astro

export interface Props {
  images?: string[];
}

const defaultImages = [
  'https://images.unsplash.com/photo-1560493676-04071c5f467b?q=80&w=1974&auto=format&fit=crop', // A landscape-oriented image
  'https://images.unsplash.com/photo-1492496913980-501348b61469?q=80&w=1887&auto=format&fit=crop', // A portrait-oriented image
  'https://images.unsplash.com/photo-1464226184884-fa280b87c399?q=80&w=2070&auto=format&fit=crop'  // Another landscape image
];

const { images = defaultImages } = Astro.props;
---

<section class="relative flex overflow-hidden h-[91vh]">

  <div class="absolute inset-0 z-[-1]">
    {images.map((src, index) => (
      <img
        src={src}
        alt={`Background slide ${index + 1}`}
        class:list={[
          "bg-slide absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out",
          index === 0 ? 'opacity-100' : 'opacity-0'
        ]}
      />
    ))}
    <!-- Add a dark overlay to make text more readable -->
    <div class="absolute inset-0 bg-black/50"></div>
  </div>

  <!-- 2. Hero Content -->
  <!-- The z-10 ensures this content is on top of the background -->
  <div class="relative flex justify-center items-center z-10 w-full h-full mx-auto px-6">
    <div class="max-w-2xl text-center" style="font-family: 'Poppins', sans-serif;">
      <h1 class="text-4xl font-bold text-white md:text-5xl lg:text-6xl">
        Innovating the Future of <span class="text-primary">Agriculture</span>
      </h1>
      <p class="mt-6 text-gray-200 text-lg">
        Harnessing technology to build a sustainable and productive future for farming worldwide.
      </p>
      <button class="mt-8 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-md font-medium transition-transform transform ">
        Discover Our Solutions
      </button>
    </div>
  </div>

</section>

<!-- 3. The JavaScript to power the slider -->
<script>
  // A good practice: wrap the logic in a function to avoid polluting the global scope
  function setupImageSlider() {
    // Select all the images with the .bg-slide class
    const slides = document.querySelectorAll('.bg-slide');
    
    // If there's only one slide (or none), no need to run the interval
    if (slides.length <= 1) {
      return;
    }

    let currentIndex = 0;

    function showNextSlide() {
      // Hide the current slide with a fade-out effect
      slides[currentIndex].classList.remove('opacity-100');
      slides[currentIndex].classList.add('opacity-0');

      // Calculate the index of the next slide, looping back to 0
      currentIndex = (currentIndex + 1) % slides.length;

      // Show the next slide with a fade-in effect
      slides[currentIndex].classList.remove('opacity-0');
      slides[currentIndex].classList.add('opacity-100');
    }

    // Change slide every 5 seconds (5000 milliseconds)
    const slideInterval = setInterval(showNextSlide, 5000);
  }

  // Run the slider setup
  setupImageSlider();
</script>